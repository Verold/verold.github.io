<!DOCTYPE html>
<html>
<head>
  <title>MiniWeb</title>
  <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
  <link rel="stylesheet" href="css/mini_3d.css" type="text/css"/>

  <script src="//commondatastorage.googleapis.com/assets.verold.com/runtime/verold.loader.js"></script>
  <script src="http://code.jquery.com/jquery-2.1.0.min.js" type="text/javascript"></script>

  <script src="js/WebGL_Check.js"></script>
</head>
<body>



  <div id="mini-container" class="mini-container">
    <div id="fallback" class="fallback-container">
      <img src="img/mini-3d-fallback.png" class="fall-img"/>
      <div class="webgl-not-supported generic-alert">
        WebGL is not supported in this browser. Visit <a href="http://verold.com/blog/2013/1/2/enabling-webgl-in-your-browser#.Utb-FpE3vFE" target="_blank">this link</a> to find out how to experience 3D in the browser.
      </div><!-- /webgl-not-supported generic-alert-->
    </div>
  </div>

  <div id="materials" class="materials">
    <div id="body-mats" class="mat-container">
      <div class="mat-butt"><a>Body Colors</a></div>
      <ul class="mat-list">
        <li><button onclick="changeBodyColor('535562f2252481020000009d')">Highclass Grey</button></li>
        <li><button onclick="changeBodyColor('53556857a6ab7802000000d0')">Chili Red</button></li>
        <li><button onclick="changeBodyColor('535562e3252481020000009b')">White</button></li>
        <li><button onclick="changeBodyColor('535562f9252481020000009f')">Black</button></li>
        <li><button onclick="changeBodyColor('53582574a9409202000002f3')">Yellow</button></li>
      </ul>
    </div>
    <div id="bonnet-mats" class="mat-container">
      <div class="mat-butt"><a>Bonnet Colors</a></div>
      <ul class="mat-list">
        <li><button onclick="changeBonnet('5355697e423cfd02000000ba')">White</button></li>
        <li><button onclick="changeBonnet('535569a8a6ab7802000000d9')">Silver</button></li>
        <li><button onclick="changeBonnet('535562f9252481020000009f')">Black</button></li>
        <li><button onclick="changeBonnet()">None</button></li>
      </ul>
    </div>
    <div id="pillar-mats" class="mat-container">
      <div class="mat-butt"><a>Pillar Colors</a></div>
      <ul class="mat-list">
        <li><button onclick="changePillar('535562f9252481020000009f')">Black</button></li>
        <li><button onclick="changePillar('535569a8a6ab7802000000d9')">Silver</button></li>
      </ul>
    </div>
    <div id="rim-mats" class="mat-container">
      <div class="mat-butt"><a>Rim Colors</a></div>
      <ul class="mat-list">
        <li><button onclick="changeRims('5356ca5ee68c5e0200000085')">Grey</button></li>
        <li><button onclick="changeRims('53503195069dd2703b000015')">Chrome</button></li>
        <li><button onclick="changeRims('535562f9252481020000009f')">Black</button></li>
      </ul>
    </div>
    <div id="roof-mats" class="mat-container">
      <div class="mat-butt"><a>Roof and Accent Colors</a></div>
      <ul class="mat-list">
        <li><button onclick="changeRoof('535562e3252481020000009b')">White</button></li>
        <li><button onclick="changeRoof('535562f9252481020000009f')">Black</button></li>
      </ul>
    </div>
    <div id="light-mats" class="mat-container">
      <div class="mat-butt"><a>Light Colors</a></div>
      <ul class="mat-list">
        <li><button onclick="changeLights('5356ca5ee68c5e0200000085')">Grey</button></li>
        <li><button onclick="changeLights('53503195069dd2703b000015')">Chrome</button></li>
        <li><button onclick="changeLights('535562f9252481020000009f')">Black</button></li>
      </ul>
    </div>
  </div>

  <script>
  window.onload = function(){
    var glSupport = supportsWebGL();
  	//TEST FOR WEBGL ENABLED
  	if(glSupport){
  	  //IF PASS, LOAD WEBGL EXPERIENCE
  	  verold.load('#mini-container', 'http://vrld.co/UgipNl.json');
      jQuery("#materials").show();
      jQuery("#fallback").remove();

      jQuery('.mat-butt').click(function(e){
        e.stopImmediatePropagation();
        e.preventDefault();
        jQuery(this).siblings("ul").toggle();
      });

      jQuery('ul').toggle();
      jQuery('#body-mats ul').toggle();
    }
    else {
      console.warn("WebGL Not Enabled");

      jQuery("#fallback").show();
    }

  };

  var bodyMat = "53556857a6ab7802000000d0";//for turning off bonnet stripes, base is chili red
  var noBonnet = false;//whether or not to show the bonnet stripes

  function changeBodyColor(material){
  	window.miniEvents.trigger('mini_mat_Body', material);
    bodyMat = material;
    if(noBonnet)changeBonnet();
  };

  function changeBonnet(material){
    if(!material){
      material = bodyMat;
      noBonnet = true;
    }
    else {
      noBonnet = false;
    }
    window.miniEvents.trigger('mini_mat_Bonnet', material);
  };

  function changePillar(material){
    window.miniEvents.trigger('mini_mat_Pillars', material);
  };

  function changeRims(material){
    window.miniEvents.trigger('mini_mat_Rims', material);
  };

  function changeRoof(material){
    window.miniEvents.trigger('mini_mat_Roof', material);
  };

  function changeLights(material){
    window.miniEvents.trigger('mini_mat_Lights', material);
  };

  </script>
 </body>
</html>